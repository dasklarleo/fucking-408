# I/O

## I/O分类

使用特性

1. 人机交互
2. 存储设备
3. 网络通信设备

传输速率：

1. 低速：键盘鼠标
2. 中速：打印机
3. 快速：磁盘

信息交换单位

1. 块设备：存取以数据块为单位、传输速率高、可寻址、随机读写
2. 字符设备：无结构类型、不可以寻址、输入输出一般采用中断方式

## I/O控制方式

1. 程序直接控制方式：需要CPU轮询，CPU与I/O串行，效率低
2. 中断驱动方式：每一条指令周期的结束，CPU检查中断判断有咩有中断需求
3. DMA方式：
   1. 基本的数据单位是块
   2. I/O直接与内存联系
   3. 传送开始和结束需要CPU，中间仅需要DMA控制器，但仍需要CPU控制数据块的大小与传送的位置
      1. 命令/状态寄存器：接受CPU发来的I/O命令或者I/O状态的信息
      2. 内存地址寄存器
      3. 数据寄存器
      4. 数据计数器：存放要传送的字节数目
4. 通道方式：对一个数据块的读写升级为对一组数据块的读写
   1. 通道是简化的处理机，可以执行指令但是咩有内存，和CPU一起共享内存

### I/O子系统

1. 用户层软件：与用户进行交互的接口
2. 设备独立性软件：独立于具体的物理设备，引入了逻辑设备。负责设备、保护、分配、释放。管理数据传送空间
   1. 执行共有操作：设备分配回收、逻辑设备到物理设备映射、缓冲管理、差错控制、设备保护
   2. 向用户层提供统一接口
3. 设备驱动程序：与硬件直接相关，**计算对应的物理地址位置**
4. 中断处理程序：保存被中断进程的CPU环境，应当存放到OS的底层
5. 硬件：设备控制器
   1. 功能
      1. 接受识别CPU或者通道发来的命令
      2. 实现数据交换
      3. 发现和记录设备以及自身的状态
      4. 设备地址识别
   2. 组成
      1. 与CPU的接口
      2. 与设备的接口
      3. I/O控制逻辑：**实现对于设备的控制**